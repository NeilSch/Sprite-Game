<html>
	<head>
		<style>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
		</style>
	</head>
<body style = "background: url('imgs/bgimage.jpg') no-repeat center center fixed;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;">


<canvas id="canvas" style=""></canvas>


<script>


  var init_size = true;

  // resize the canvas to fill browser window dynamically

  window.addEventListener('resize', resizeCanvas, false);

                    function resizeCanvas() {

                            canvas.width = window.innerWidth;

                            canvas.height = window.innerHeight;

                            if(init_size){

                                init_size = false;

                                return;

                            }

                            for(var i=0; i < agents.length; ++i){

                                    agents[i].canvas_resize();
                            }
                    }
resizeCanvas();

var loop_imgs = [];

var img_0 = new Image();
img_0.src = "imgs/0U.png"

var img_1 = new Image();
img_1.src = "imgs/1U.png"

var img_2 = new Image();
img_2.src = "imgs/2U.png"

var img_3 = new Image();
img_3.src = "imgs/3U.png"

loop_imgs = [ img_0, img_1, img_2, img_3 ]

// initial parameter setups
var loop_index = 0;
var context = canvas.getContext('2d');
var x = 10;
var x_dist = 0;
var y = 10;
var y_dist = 0;
var last_animation_time =  new Date().getTime();
var time_delta = 1;
var bk_img = null;
var img;

document.addEventListener('keydown', function(event)
		{
	if (event.code === 'ArrowUp')
		{
		y_dist = -2;
		x_dist = 0;
		img_0.src = "imgs/0U.png"
		img_1.src = "imgs/1U.png"
		img_2.src = "imgs/2U.png"
		img_3.src = "imgs/3U.png"
		}
	if (event.code === 'ArrowDown')
                {
                y_dist = 2;
		x_dist = 0;
		img_0.src = "imgs/0D.png"
                img_1.src = "imgs/1D.png"
                img_2.src = "imgs/2D.png"
                img_3.src = "imgs/3D.png"
                }
	if(event.code === 'ArrowLeft')
		{
		y_dist = 0;
		x_dist = -2;
		img_0.src = "imgs/0L.png"
                img_1.src = "imgs/1L.png"
                img_2.src = "imgs/2L.png"
                img_3.src = "imgs/3L.png"
		}
	if(event.code === 'ArrowRight')
		{
		y_dist = 0;
		x_dist = 2;
		img_0.src = "imgs/0R.png"
                img_1.src = "imgs/1R.png"
                img_2.src = "imgs/2R.png"
                img_3.src = "imgs/3R.png"
		}
			});

function call_me_on_draw()
{
		
window.requestAnimationFrame(call_me_on_draw);
	if( (time_delta + last_animation_time) >  new Date().getTime() ){
        return;
    }
 last_animation_time =  new Date().getTime();
 if( bk_img != null){
        context.putImageData( bk_img, x, y);
    }
x = x + x_dist;
y = y + y_dist;
bk_img = context.getImageData(x, y, 134, 142);
loop_index++;
    if(loop_index > 3)
	{
        	loop_index = 0;
	}

img = loop_imgs[loop_index];
context.drawImage( img, x, y, 134, 142);

}

call_me_on_draw();
</script>

</body>

</html>


